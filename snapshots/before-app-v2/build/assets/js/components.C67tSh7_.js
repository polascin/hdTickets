import{m as s}from"./alpine.CJ7ePfyg.js";import{C as l,a as m,L as f,P as g,b as w,B as b,p as y,c as v,d as k,A as E,D as C,e as O,f as D}from"./charts.CVV2ciRB.js";l.register(m,f,g,w,b,y,v,k,E,C,O,D);document.addEventListener("alpine:init",()=>{s.data("chartComponent",(e={})=>({chart:null,chartConfig:{type:"line",data:{labels:[],datasets:[]},options:{responsive:!0,maintainAspectRatio:!1,interaction:{intersect:!1,mode:"index"},plugins:{legend:{display:!0,position:"top"},tooltip:{enabled:!0,backgroundColor:"rgba(0, 0, 0, 0.8)",titleColor:"#fff",bodyColor:"#fff",borderColor:"#333",borderWidth:1}},scales:{x:{display:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}},y:{display:!0,grid:{color:"rgba(0, 0, 0, 0.1)"}}}},...e},init(){this.$nextTick(()=>{this.initializeChart()})},initializeChart(){const t=this.$el.querySelector("canvas");if(!t){console.error("Chart canvas element not found");return}const n=t.getContext("2d");this.chart=new l(n,this.chartConfig)},updateChart(t){this.chart&&(this.chart.data={...this.chart.data,...t},this.chart.update("none"))},updateDatasets(t){this.chart&&(this.chart.data.datasets=t,this.chart.update("none"))},addDataPoint(t,n){this.chart&&(this.chart.data.labels.push(t),this.chart.data.datasets.forEach((o,i)=>{o.data.push(n[i]||0)}),this.chart.data.labels.length>20&&(this.chart.data.labels.shift(),this.chart.data.datasets.forEach(o=>{o.data.shift()})),this.chart.update("none"))},setTheme(t){if(!this.chart)return;const n=t?"#e5e7eb":"#374151",o=t?"rgba(255, 255, 255, 0.1)":"rgba(0, 0, 0, 0.1)";this.chart.options.plugins.legend.labels.color=n,this.chart.options.scales.x.ticks.color=n,this.chart.options.scales.y.ticks.color=n,this.chart.options.scales.x.grid.color=o,this.chart.options.scales.y.grid.color=o,this.chart.update("none")},destroy(){this.chart&&(this.chart.destroy(),this.chart=null)}})),s.data("statsChart",()=>({...s.raw(s.data("chartComponent")({type:"line",data:{labels:[],datasets:[{label:"Platform Status",data:[],borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",tension:.4,fill:!0},{label:"Active Users",data:[],borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",tension:.4,fill:!0}]},options:{responsive:!0,maintainAspectRatio:!1,animation:{duration:750,easing:"easeInOutQuart"},plugins:{legend:{display:!0,position:"top"}},scales:{y:{beginAtZero:!0,max:100}}}}))})),s.data("queueChart",()=>({...s.raw(s.data("chartComponent")({type:"bar",data:{labels:["Processed","Failed","Pending"],datasets:[{label:"Jobs",data:[0,0,0],backgroundColor:["rgba(34, 197, 94, 0.8)","rgba(239, 68, 68, 0.8)","rgba(245, 158, 11, 0.8)"],borderColor:["rgb(34, 197, 94)","rgb(239, 68, 68)","rgb(245, 158, 11)"],borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}},scales:{y:{beginAtZero:!0}}}}))})),s.data("errorChart",()=>({...s.raw(s.data("chartComponent")({type:"doughnut",data:{labels:["Network Errors","Server Errors","Client Errors","Other"],datasets:[{data:[0,0,0,0],backgroundColor:["rgba(239, 68, 68, 0.8)","rgba(245, 158, 11, 0.8)","rgba(59, 130, 246, 0.8)","rgba(107, 114, 128, 0.8)"],borderColor:["rgb(239, 68, 68)","rgb(245, 158, 11)","rgb(59, 130, 246)","rgb(107, 114, 128)"],borderWidth:2}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{position:"bottom"}}}}))}))});window.navigationData=function(){return{mobileMenuOpen:!1,adminDropdownOpen:!1,profileDropdownOpen:!1,isScrolled:!1,announcer:null,scrollThrottle:null,init(){console.log("ðŸ”§ Enhanced NavigationData component initialized"),this.setupAnnouncer(),this.setupScrollDetection(),this.setupKeyboardNavigation(),this.setupClickOutside(),this.setupEscapeKey(),this.setupFocusManagement(),this.setupRouteChangeDetection()},setupAnnouncer(){this.announcer=document.createElement("div"),this.announcer.setAttribute("aria-live","polite"),this.announcer.setAttribute("aria-atomic","true"),this.announcer.style.position="absolute",this.announcer.style.left="-10000px",this.announcer.style.width="1px",this.announcer.style.height="1px",this.announcer.style.overflow="hidden",document.body.appendChild(this.announcer)},announce(e){this.announcer&&(this.announcer.textContent=e)},setupScrollDetection(){const e=()=>{this.isScrolled=window.scrollY>10;const t=document.querySelector('nav[role="navigation"]');t&&t.classList.toggle("nav-scrolled",this.isScrolled)};window.addEventListener("scroll",()=>{this.scrollThrottle&&cancelAnimationFrame(this.scrollThrottle),this.scrollThrottle=requestAnimationFrame(e)},{passive:!0})},setupKeyboardNavigation(){document.addEventListener("keydown",e=>{e.key==="Tab"&&this.handleTabNavigation(e),(e.key==="ArrowDown"||e.key==="ArrowUp")&&this.handleArrowNavigation(e),e.key==="Enter"&&this.handleEnterKey(e)})},handleTabNavigation(e){const n=this.getFocusableElements().indexOf(document.activeElement);if(n!==-1&&(this.adminDropdownOpen||this.profileDropdownOpen)){const o=this.adminDropdownOpen?document.querySelector('[data-dropdown="admin"]'):document.querySelector('[data-dropdown="profile"]');if(o){const i=this.getFocusableElements(o);if(i.length>0){e.preventDefault();const a=e.shiftKey?(n-1+i.length)%i.length:(n+1)%i.length;i[a].focus()}}}},handleArrowNavigation(e){if(this.adminDropdownOpen||this.profileDropdownOpen){e.preventDefault();const t=this.adminDropdownOpen?document.querySelector('[data-dropdown="admin"]'):document.querySelector('[data-dropdown="profile"]');if(t){const n=t.querySelectorAll("a, button"),o=Array.from(n).indexOf(document.activeElement);let i;e.key==="ArrowDown"?i=(o+1)%n.length:i=(o-1+n.length)%n.length,n[i].focus()}}},handleEnterKey(e){const t=e.target;t.tagName==="BUTTON"&&t.getAttribute("role")!=="menuitem"&&t.click()},getFocusableElements(e=document){return Array.from(e.querySelectorAll('a[href], button:not([disabled]), input:not([disabled]), select:not([disabled]), textarea:not([disabled]), [tabindex]:not([tabindex="-1"])'))},setupClickOutside(){document.addEventListener("click",e=>{const t=document.querySelector('nav[role="navigation"]');t&&!t.contains(e.target)&&this.closeAll()})},setupEscapeKey(){document.addEventListener("keydown",e=>{e.key==="Escape"&&(this.closeAll(),this.announce("Navigation menus closed"))})},setupFocusManagement(){this.previousFocus=null},setupRouteChangeDetection(){window.addEventListener("popstate",()=>{this.closeAll()}),document.addEventListener("click",e=>{e.target.tagName==="A"&&e.target.href&&setTimeout(()=>this.closeAll(),100)})},closeAll(){this.adminDropdownOpen=!1,this.profileDropdownOpen=!1,this.mobileMenuOpen=!1,this.previousFocus&&(this.previousFocus.focus(),this.previousFocus=null)},toggleMobileMenu(){this.mobileMenuOpen=!this.mobileMenuOpen,this.mobileMenuOpen?(this.adminDropdownOpen=!1,this.profileDropdownOpen=!1,this.announce("Mobile menu opened"),this.$nextTick(()=>{const e=document.querySelector("#mobile-menu a, #mobile-menu button");e&&e.focus()})):this.announce("Mobile menu closed"),document.body.style.overflow=this.mobileMenuOpen?"hidden":"",console.log("ðŸ“± Mobile menu:",this.mobileMenuOpen?"OPEN":"CLOSED")},toggleAdminDropdown(){this.previousFocus=this.adminDropdownOpen?null:document.activeElement,this.adminDropdownOpen=!this.adminDropdownOpen,this.profileDropdownOpen=!1,this.mobileMenuOpen=!1,this.adminDropdownOpen?(this.announce("Admin menu opened"),this.$nextTick(()=>{const e=document.querySelector('[data-dropdown="admin"] a, [data-dropdown="admin"] button');e&&e.focus()})):this.announce("Admin menu closed"),console.log("ðŸ”§ Admin dropdown:",this.adminDropdownOpen?"OPEN":"CLOSED")},toggleProfileDropdown(){this.previousFocus=this.profileDropdownOpen?null:document.activeElement,this.profileDropdownOpen=!this.profileDropdownOpen,this.adminDropdownOpen=!1,this.mobileMenuOpen=!1,this.profileDropdownOpen?(this.announce("Profile menu opened"),this.$nextTick(()=>{const e=document.querySelector('[data-dropdown="profile"] a, [data-dropdown="profile"] button');e&&e.focus()})):this.announce("Profile menu closed"),console.log("ðŸ‘¤ Profile dropdown:",this.profileDropdownOpen?"OPEN":"CLOSED")},handleDropdownItemClick(e=null){e&&typeof e=="function"&&e(),setTimeout(()=>{this.closeAll()},100)},toggleTheme(){const e=document.documentElement.classList.contains("dark");document.documentElement.classList.toggle("dark",!e),localStorage.setItem("darkMode",!e),this.announce(`Switched to ${e?"light":"dark"} theme`)},destroy(){this.announcer&&document.body.removeChild(this.announcer),this.scrollThrottle&&cancelAnimationFrame(this.scrollThrottle),document.body.style.overflow=""}}};document.addEventListener("alpine:init",()=>{s.data("notificationSystem",()=>({notifications:[],maxNotifications:5,init(){window.addEventListener("show-notification",e=>{this.show(e.detail.message,e.detail.type,e.detail.duration)}),"Notification"in window&&Notification.permission==="default"&&this.requestPermission()},show(e,t="info",n=5e3){const o={id:Date.now()+Math.random(),message:e,type:t,duration:n,visible:!0,progress:100};this.notifications.unshift(o),this.notifications.length>this.maxNotifications&&(this.notifications=this.notifications.slice(0,this.maxNotifications)),n>0&&(this.startProgress(o),setTimeout(()=>{this.remove(o.id)},n)),(t==="success"||t==="warning"||t==="error")&&this.showBrowserNotification(e,t)},remove(e){const t=this.notifications.findIndex(n=>n.id===e);t>-1&&(this.notifications[t].visible=!1,setTimeout(()=>{this.notifications.splice(t,1)},300))},startProgress(e){if(e.duration<=0)return;const t=Date.now(),o=setInterval(()=>{const i=Date.now()-t,a=Math.max(0,e.duration-i);e.progress=a/e.duration*100,a<=0&&clearInterval(o)},50)},async requestPermission(){return"Notification"in window?await Notification.requestPermission()==="granted":!1},showBrowserNotification(e,t){if("Notification"in window&&Notification.permission==="granted"){const n={body:e,icon:"/assets/images/hdTicketsLogo.png",badge:"/assets/images/hdTicketsLogo.png",tag:"hdtickets-"+t,requireInteraction:t==="error",silent:t==="info"},o=new Notification("HD Tickets",n);o.onclick=()=>{window.focus(),o.close()},t!=="error"&&setTimeout(()=>o.close(),5e3)}},getIcon(e){const t={success:"âœ…",error:"âŒ",warning:"âš ï¸",info:"â„¹ï¸"};return t[e]||t.info},getClasses(e){const t="transform transition-all duration-300 ease-in-out p-4 rounded-lg shadow-lg border-l-4 max-w-sm",n={success:"bg-green-50 border-green-400 text-green-800 dark:bg-green-900 dark:text-green-200",error:"bg-red-50 border-red-400 text-red-800 dark:bg-red-900 dark:text-red-200",warning:"bg-yellow-50 border-yellow-400 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200",info:"bg-blue-50 border-blue-400 text-blue-800 dark:bg-blue-900 dark:text-blue-200"};return`${t} ${n[e]||n.info}`},success(e,t){this.show(e,"success",t)},error(e,t=8e3){this.show(e,"error",t)},warning(e,t){this.show(e,"warning",t)},info(e,t){this.show(e,"info",t)},goal(e="Goal! You scored with HD Tickets!"){this.show(`âš½ ${e}`,"success")},touchdown(e="Touchdown! Ticket secured!"){this.show(`ðŸˆ ${e}`,"success")},homerun(e="Home run! Best seats found!"){this.show(`âš¾ ${e}`,"success")},assist(e="Great assist! Price drop detected!"){this.show(`ðŸ€ ${e}`,"info")}})),window.notify={show:(e,t,n)=>{const o=new CustomEvent("show-notification",{detail:{message:e,type:t,duration:n}});window.dispatchEvent(o)},success:(e,t)=>window.notify.show(e,"success",t),error:(e,t)=>window.notify.show(e,"error",t),warning:(e,t)=>window.notify.show(e,"warning",t),info:(e,t)=>window.notify.show(e,"info",t),goal:e=>{const t=new CustomEvent("show-notification",{detail:{message:`âš½ ${e||"Goal! You scored with HD Tickets!"}`,type:"success"}});window.dispatchEvent(t)}}});document.addEventListener("alpine:init",()=>{s.data("realTimeStats",(e={})=>({stats:{platforms:50,monitoring:"24/7",users:"15K+",alerts:0,priceDrops:0,activeMonitors:0,...e},isConnected:!1,isLoading:!0,lastUpdate:null,reconnectAttempts:0,maxReconnectAttempts:5,init(){this.loadInitialStats(),this.connectWebSocket(),this.startPolling(),window.addEventListener("online",()=>this.handleOnline()),window.addEventListener("offline",()=>this.handleOffline())},async loadInitialStats(){try{const t=await fetch("/api/v1/stats/welcome");if(t.ok){const n=await t.json();this.updateStats(n)}}catch(t){console.warn("Failed to load initial stats:",t)}finally{this.isLoading=!1}},connectWebSocket(){if(typeof window.Echo<"u")try{window.Echo.channel("stats").listen(".stats.updated",t=>{this.updateStats(t.stats),this.isConnected=!0,this.reconnectAttempts=0}),window.Echo.channel("metrics").listen(".metric.updated",t=>{this.updateMetric(t.metric,t.value)}),this.isConnected=!0}catch(t){console.warn("WebSocket connection failed:",t),this.handleReconnect()}},updateStats(t){Object.keys(t).forEach(n=>{Object.prototype.hasOwnProperty.call(this.stats,n)&&n!=="monitoring"?this.animateNumber(n,this.stats[n],t[n]):this.stats[n]=t[n]}),this.lastUpdate=new Date},updateMetric(t,n){Object.prototype.hasOwnProperty.call(this.stats,t)&&this.animateNumber(t,this.stats[t],n)},animateNumber(t,n,o){const i=parseInt(n),a=parseInt(o);if(isNaN(i)||isNaN(a)){this.stats[t]=o;return}const d=1e3,r=30,h=(a-i)/r;let c=0;const u=setInterval(()=>{c++;const p=Math.round(i+h*c);c>=r?(this.stats[t]=o,clearInterval(u)):this.stats[t]=this.formatNumber(p)},d/r)},formatNumber(t){if(typeof t=="string"&&t.includes("K"))return t;const n=parseInt(t);return n>=1e3?Math.round(n/1e3)+"K+":n.toString()},startPolling(){setInterval(async()=>{if(!this.isConnected&&navigator.onLine)try{const t=await fetch("/api/v1/stats/welcome");if(t.ok){const n=await t.json();this.updateStats(n)}}catch(t){console.warn("Polling failed:",t)}},3e4)},handleReconnect(){if(this.reconnectAttempts>=this.maxReconnectAttempts){console.warn("Max reconnection attempts reached");return}this.reconnectAttempts++;const t=Math.min(1e3*Math.pow(2,this.reconnectAttempts),3e4);setTimeout(()=>{console.warn(`Reconnection attempt ${this.reconnectAttempts}/${this.maxReconnectAttempts}`),this.connectWebSocket()},t)},handleOnline(){this.isConnected=!1,this.reconnectAttempts=0,this.connectWebSocket(),this.loadInitialStats()},handleOffline(){this.isConnected=!1},get connectionStatus(){return navigator.onLine?this.isConnected?"connected":"connecting":"offline"},get statusColor(){switch(this.connectionStatus){case"connected":return"text-green-500";case"connecting":return"text-yellow-500";case"offline":return"text-red-500";default:return"text-gray-500"}},get statusIcon(){switch(this.connectionStatus){case"connected":return"ðŸŸ¢";case"connecting":return"ðŸŸ¡";case"offline":return"ðŸ”´";default:return"âšª"}}}))});document.addEventListener("alpine:init",()=>{s.data("themeSwitcher",()=>({darkMode:!1,isTransitioning:!1,init(){this.darkMode=localStorage.getItem("theme")==="dark"||!localStorage.getItem("theme")&&window.matchMedia("(prefers-color-scheme: dark)").matches,this.applyTheme(),window.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",e=>{localStorage.getItem("theme")||(this.darkMode=e.matches,this.applyTheme())})},toggle(){this.isTransitioning||(this.isTransitioning=!0,this.darkMode=!this.darkMode,document.documentElement.classList.add("theme-transitioning"),this.applyTheme(),localStorage.setItem("theme",this.darkMode?"dark":"light"),setTimeout(()=>{document.documentElement.classList.remove("theme-transitioning"),this.isTransitioning=!1},300),typeof gtag<"u"&&gtag("event","theme_change",{theme:this.darkMode?"dark":"light"}))},applyTheme(){this.darkMode?(document.documentElement.classList.add("dark"),document.documentElement.style.colorScheme="dark"):(document.documentElement.classList.remove("dark"),document.documentElement.style.colorScheme="light");const e=document.querySelector('meta[name="theme-color"]');e&&e.setAttribute("content",this.darkMode?"#1f2937":"#2563eb")},get themeIcon(){return this.darkMode?"â˜€ï¸":"ðŸŒ™"},get themeLabel(){return this.darkMode?"Light Mode":"Dark Mode"}}))});
