var m=(o,e)=>()=>(e||o((e={exports:{}}).exports,e),e.exports);var b=m((v,n)=>{class g{constructor(e={}){this.options={enablePolyfill:!0,debug:!1,breakpoints:{xs:320,sm:384,md:512,lg:768,xl:1024,"2xl":1280},...e},this.supportsContainerQueries=this.checkSupport(),this.init()}init(){this.supportsContainerQueries?console.log("âœ… Container queries supported"):this.options.enablePolyfill&&(console.log("ðŸ”„ Enabling container query polyfill"),this.setupPolyfill())}checkSupport(){try{return CSS.supports("container-type","inline-size")}catch{return!1}}setupPolyfill(){document.querySelectorAll(".card-container, .dashboard-container").forEach(t=>{new ResizeObserver(s=>{s.forEach(r=>{const a=r.borderBoxSize[0].inlineSize;this.updateContainerClasses(t,a)})}).observe(t)})}updateContainerClasses(e,t){Object.keys(this.options.breakpoints).forEach(i=>{e.classList.remove(`cq-${i}`)}),Object.entries(this.options.breakpoints).forEach(([i,s])=>{t>=s&&e.classList.add(`cq-${i}`)})}makeContainer(e,t="component"){typeof e=="string"&&(e=document.querySelector(e)),e&&this.supportsContainerQueries&&(e.style.containerName=t,e.style.containerType="inline-size")}}typeof window<"u"&&document.addEventListener("DOMContentLoaded",()=>{window.containerQuerySupport=new g});class h{constructor(){this.observers=new Set,this.gridContainers=new Set,this.resizeDebounceTimer=null,this.config={debounceDelay:100,minColumnWidth:200,maxColumns:12,gapSize:16},this.init()}init(){this.setupResizeListener(),this.initializeExistingGrids(),this.observeNewGrids(),document.readyState==="loading"&&document.addEventListener("DOMContentLoaded",()=>{this.initializeExistingGrids()})}setupResizeListener(){window.addEventListener("resize",e=>{clearTimeout(this.resizeDebounceTimer),this.resizeDebounceTimer=setTimeout(()=>{this.handleResize(e)},this.config.debounceDelay)}),window.addEventListener("orientationchange",()=>{setTimeout(()=>{this.handleResize()},100)})}handleResize(){this.gridContainers.forEach(e=>{this.updateGridLayout(e)}),window.dispatchEvent(new CustomEvent("hd:gridLayoutUpdated",{detail:{gridContainers:Array.from(this.gridContainers)}}))}initializeExistingGrids(){document.querySelectorAll(".hd-grid, .hd-card-grid, .hd-grid-auto-fit, .hd-grid-auto-fill").forEach(t=>{this.initializeGrid(t)})}observeNewGrids(){if("MutationObserver"in window){const e=new MutationObserver(t=>{t.forEach(i=>{i.addedNodes.forEach(s=>{s.nodeType===Node.ELEMENT_NODE&&(this.isGridContainer(s)&&this.initializeGrid(s),s.querySelectorAll?.(".hd-grid, .hd-card-grid, .hd-grid-auto-fit, .hd-grid-auto-fill")?.forEach(a=>{this.initializeGrid(a)}))})})});e.observe(document.body,{childList:!0,subtree:!0}),this.observers.add(e)}}isGridContainer(e){return e.classList?.contains("hd-grid")||e.classList?.contains("hd-card-grid")||e.classList?.contains("hd-grid-auto-fit")||e.classList?.contains("hd-grid-auto-fill")}initializeGrid(e){!e||this.gridContainers.has(e)||(this.gridContainers.add(e),this.updateGridLayout(e),e.setAttribute("data-hd-grid-initialized","true"),this.setupContainerObserver(e))}setupContainerObserver(e){if("ResizeObserver"in window){const t=new ResizeObserver(i=>{i.forEach(s=>{this.updateGridLayout(s.target)})});t.observe(e),this.observers.add(t)}}updateGridLayout(e){if(!e)return;const t=e.clientWidth;if(Array.from(e.children).length===0)return;switch(this.getLayoutType(e)){case"auto-fit":this.updateAutoFitGrid(e,t);break;case"auto-fill":this.updateAutoFillGrid(e,t);break;case"card-grid":this.updateCardGrid(e,t);break;case"fixed-grid":this.updateFixedGrid(e,t);break;default:this.updateDefaultGrid(e,t)}this.updateGridItemClasses(e)}getLayoutType(e){return e.classList.contains("hd-grid-auto-fit")?"auto-fit":e.classList.contains("hd-grid-auto-fill")?"auto-fill":e.classList.contains("hd-card-grid")?"card-grid":e.classList.contains("hd-grid")?"fixed-grid":"default"}updateAutoFitGrid(e,t){const i=this.getMinItemWidth(e),s=this.getGapSize(e),r=t-s,a=Math.floor(r/(i+s)),d=Math.max(1,Math.min(a,this.config.maxColumns));e.style.gridTemplateColumns=`repeat(${d}, 1fr)`,this.updateGridResponsiveClasses(e,d)}updateAutoFillGrid(e,t){const i=this.getMinItemWidth(e),s=this.getGapSize(e);e.style.gridTemplateColumns=`repeat(auto-fill, minmax(${i}px, 1fr))`;const r=Math.floor(t/(i+s));this.updateGridResponsiveClasses(e,r)}updateCardGrid(e,t){const i=this.getCardWidth(e),s=this.getGapSize(e),r=Math.floor((t+s)/(i+s)),a=Math.max(1,Math.min(r,this.config.maxColumns));e.style.gridTemplateColumns=`repeat(${a}, 1fr)`,this.updateGridResponsiveClasses(e,a)}updateFixedGrid(e,t){t<576?e.classList.add("hd-grid-mobile-stack"):e.classList.remove("hd-grid-mobile-stack")}updateDefaultGrid(e,t){const i=this.calculateOptimalColumns(e,t);this.updateGridResponsiveClasses(e,i)}calculateOptimalColumns(e,t){const i=e.children;if(i.length===0)return 1;const s=this.config.minColumnWidth,r=this.getGapSize(e),a=Math.floor((t+r)/(s+r));return Math.max(1,Math.min(a,i.length,this.config.maxColumns))}updateGridResponsiveClasses(e,t){const i=["hd-grid-cols-1","hd-grid-cols-2","hd-grid-cols-3","hd-grid-cols-4","hd-grid-cols-5","hd-grid-cols-6","hd-grid-cols-7","hd-grid-cols-8","hd-grid-cols-9","hd-grid-cols-10","hd-grid-cols-11","hd-grid-cols-12"];e.classList.remove(...i),e.classList.add(`hd-grid-cols-${t}`),e.setAttribute("data-hd-grid-columns",t)}updateGridItemClasses(e){const t=Array.from(e.children),i=parseInt(e.getAttribute("data-hd-grid-columns")||"1");t.forEach((s,r)=>{const a=Math.floor(r/i)+1,d=r%i+1;s.setAttribute("data-hd-grid-row",a),s.setAttribute("data-hd-grid-col",d),s.classList.toggle("hd-grid-item-first-col",d===1),s.classList.toggle("hd-grid-item-last-col",d===i),s.classList.toggle("hd-grid-item-first-row",a===1),s.classList.toggle("hd-grid-item-last-row",r>=t.length-i)})}getMinItemWidth(e){const t=e.getAttribute("data-min-item-width");if(t)return parseInt(t);const s=getComputedStyle(e).getPropertyValue("--min-item-width");return s?parseInt(s):e.classList.contains("hd-card-grid-sm")?200:e.classList.contains("hd-card-grid-lg")?400:e.classList.contains("hd-card-grid")?300:this.config.minColumnWidth}getCardWidth(e){return e.classList.contains("hd-card-grid-sm")?200:e.classList.contains("hd-card-grid-lg")?400:300}getGapSize(e){const t=getComputedStyle(e),i=t.gap||t.gridGap;return i&&i!=="normal"?parseInt(i):e.classList.contains("hd-grid-gap-sm")?8:e.classList.contains("hd-grid-gap-lg")?24:e.classList.contains("hd-grid-gap-xl")?32:e.classList.contains("hd-grid-no-gap")?0:this.config.gapSize}registerGrid(e){e&&!this.gridContainers.has(e)&&this.initializeGrid(e)}unregisterGrid(e){this.gridContainers.has(e)&&(this.gridContainers.delete(e),e.removeAttribute("data-hd-grid-initialized"),e.removeAttribute("data-hd-grid-columns"))}updateAllGrids(){this.gridContainers.forEach(e=>{this.updateGridLayout(e)})}getGridStats(){return{totalGrids:this.gridContainers.size,activeObservers:this.observers.size,config:{...this.config}}}updateConfig(e){this.config={...this.config,...e},this.updateAllGrids()}destroy(){clearTimeout(this.resizeDebounceTimer),this.observers.forEach(e=>{e.disconnect?.()}),this.gridContainers.clear(),this.observers.clear(),window.removeEventListener("resize",this.handleResize),window.removeEventListener("orientationchange",this.handleResize)}}const u={createResponsiveGrid(o,e={}){const i={...{minItemWidth:200,maxColumns:12,gap:"1rem",autoFit:!0},...e};return o.classList.add("hd-grid"),i.autoFit&&o.classList.add("hd-grid-auto-fit"),o.style.setProperty("--min-item-width",`${i.minItemWidth}px`),o.style.setProperty("--max-columns",i.maxColumns),o.style.gap=i.gap,window.hdGridLayout&&window.hdGridLayout.registerGrid(o),o},createCardGrid(o,e="md"){const t={sm:"hd-card-grid-sm",md:"hd-card-grid",lg:"hd-card-grid-lg"};return o.classList.add(t[e]||t.md),window.hdGridLayout&&window.hdGridLayout.registerGrid(o),o},addResponsiveColumns(o,e={}){const i={...{sm:1,md:2,lg:3,xl:4},...e};return Object.entries(i).forEach(([s,r])=>{s==="sm"?o.classList.add(`hd-col-sm-${r}`):o.classList.add(`hd-col-${s}-${r}`)}),o},calculateOptimalLayout(o,e,t=200){const i=Array.isArray(o)?o.length:o,s=16,r=e-s,a=Math.floor(r/(t+s)),d=Math.max(1,Math.min(a,i,12));return{columns:d,itemWidth:Math.floor((r-s*(d-1))/d),rows:Math.ceil(i/d)}}};let l;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{l=new h,window.hdGridLayout=l,window.GridLayoutHelpers=u}):(l=new h,window.hdGridLayout=l,window.GridLayoutHelpers=u);typeof n<"u"&&n.exports&&(n.exports={HDGridLayout:h,GridLayoutHelpers:u});class f{constructor(e={}){this.options={pullToRefreshThreshold:60,swipeThreshold:50,longPressThreshold:500,rippleEnabled:!0,...e},this.init()}init(){this.addTouchOptimizations(),this.addPullToRefreshSupport(),this.addSwipeSupport(),this.addTouchFeedback()}addTouchOptimizations(){document.body.classList.add("touch-optimized"),document.querySelectorAll('button, a, input, [role="button"]').forEach(t=>{t.classList.contains("touch-target")||t.classList.add("touch-target")})}addPullToRefreshSupport(){document.querySelectorAll(".pull-to-refresh").forEach(t=>{let i=0,s=!1;t.addEventListener("touchstart",r=>{t.scrollTop===0&&(i=r.touches[0].clientY,s=!0)}),t.addEventListener("touchmove",r=>{if(!s)return;const d=r.touches[0].clientY-i;d>0&&(r.preventDefault(),d>this.options.pullToRefreshThreshold&&t.classList.add("pulling"))}),t.addEventListener("touchend",()=>{s&&t.classList.contains("pulling")&&t.dispatchEvent(new CustomEvent("pullrefresh")),s=!1,t.classList.remove("pulling")})})}addSwipeSupport(){document.querySelectorAll(".swipeable").forEach(t=>{let i=0;t.addEventListener("touchstart",s=>{i=s.touches[0].clientX}),t.addEventListener("touchend",s=>{const a=s.changedTouches[0].clientX-i;if(Math.abs(a)>this.options.swipeThreshold){const d=a>0?"right":"left";t.dispatchEvent(new CustomEvent("swipe",{detail:{direction:d,distance:Math.abs(a)}}))}})})}addTouchFeedback(){if(!this.options.rippleEnabled)return;document.querySelectorAll("button:not(.no-ripple), .touch-feedback").forEach(t=>{t.addEventListener("touchstart",i=>{const s=t.getBoundingClientRect(),r=i.touches[0].clientX-s.left,a=i.touches[0].clientY-s.top;this.createRipple(t,r,a)})})}createRipple(e,t,i){const s=document.createElement("span");s.className="touch-ripple",s.style.left=t+"px",s.style.top=i+"px",e.appendChild(s),setTimeout(()=>s.remove(),600)}}typeof window<"u"&&document.addEventListener("DOMContentLoaded",()=>{window.touchSupport=new f});class p{constructor(){this.observers=new Set,this.lazyLoadQueue=new Set,this.resizeHandlers=new Set,this.scrollHandlers=new Set,this.config={intersectionThreshold:.1,rootMargin:"50px",lazyLoadDelay:100,debounceDelay:16,maxObservers:50},this.init()}init(){this.setupIntersectionObservers(),this.setupLazyLoading(),this.setupOptimizedEventHandlers(),this.setupMemoryManagement(),this.preloadCriticalResources(),document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{this.optimizeInitialRender()}):this.optimizeInitialRender()}setupIntersectionObservers(){if(!("IntersectionObserver"in window)){console.warn("IntersectionObserver not supported, falling back to scroll events"),this.setupScrollFallback();return}this.visibilityObserver=new IntersectionObserver(e=>{e.forEach(t=>{const i=t.target;t.isIntersecting?this.handleElementVisible(i):this.handleElementHidden(i)})},{threshold:this.config.intersectionThreshold,rootMargin:this.config.rootMargin}),this.observers.add(this.visibilityObserver),this.lazyLoadObserver=new IntersectionObserver(e=>{e.forEach(t=>{t.isIntersecting&&(this.lazyLoadElement(t.target),this.lazyLoadObserver.unobserve(t.target))})},{threshold:.01,rootMargin:"100px"}),this.observers.add(this.lazyLoadObserver)}setupLazyLoading(){const e=document.querySelectorAll('img[data-src], img[loading="lazy"]'),t=document.querySelectorAll("[data-lazy-load]"),i=document.querySelectorAll("iframe[data-src]");e.forEach(s=>{this.lazyLoadObserver&&this.lazyLoadObserver.observe(s),this.lazyLoadQueue.add(s)}),t.forEach(s=>{this.lazyLoadObserver&&this.lazyLoadObserver.observe(s),this.lazyLoadQueue.add(s)}),i.forEach(s=>{this.lazyLoadObserver&&this.lazyLoadObserver.observe(s),this.lazyLoadQueue.add(s)})}handleElementVisible(e){e.classList.add("hd-visible"),e.hasAttribute("data-init-on-visible")&&this.initializeComponent(e),e.hasAttribute("data-animate-on-visible")&&this.startAnimation(e),e.dispatchEvent(new CustomEvent("hd:visible",{detail:{element:e,observer:this.visibilityObserver}}))}handleElementHidden(e){e.classList.remove("hd-visible"),e.hasAttribute("data-pause-on-hidden")&&this.pauseComponent(e),e.dispatchEvent(new CustomEvent("hd:hidden",{detail:{element:e,observer:this.visibilityObserver}}))}lazyLoadElement(e){switch(e.tagName.toLowerCase()){case"img":this.lazyLoadImage(e);break;case"iframe":this.lazyLoadIframe(e);break;default:this.lazyLoadComponent(e)}}lazyLoadImage(e){const t=e.getAttribute("data-src")||e.getAttribute("src");if(!t)return;e.classList.add("hd-loading");const i=new Image;i.onload=()=>{e.src=t,e.classList.remove("hd-loading"),e.classList.add("hd-loaded"),e.removeAttribute("data-src"),this.fadeInElement(e),e.dispatchEvent(new CustomEvent("hd:imageLoaded",{detail:{src:t,element:e}}))},i.onerror=()=>{e.classList.remove("hd-loading"),e.classList.add("hd-error");const s=e.getAttribute("data-fallback");s&&(e.src=s),e.dispatchEvent(new CustomEvent("hd:imageError",{detail:{src:t,element:e}}))},i.src=t}lazyLoadIframe(e){const t=e.getAttribute("data-src");t&&(e.classList.add("hd-loading"),e.src=t,e.removeAttribute("data-src"),e.onload=()=>{e.classList.remove("hd-loading"),e.classList.add("hd-loaded"),this.fadeInElement(e)})}lazyLoadComponent(e){switch(e.getAttribute("data-lazy-load")){case"chart":this.loadChart(e);break;case"map":this.loadMap(e);break;case"widget":this.loadWidget(e);break;default:this.loadGenericComponent(e)}}setupOptimizedEventHandlers(){let e;const t=()=>{clearTimeout(e),e=setTimeout(()=>{this.handleOptimizedResize()},this.config.debounceDelay)};window.addEventListener("resize",t,{passive:!0});let i,s=!1;const r=()=>{s||(window.requestAnimationFrame(()=>{this.handleOptimizedScroll(),s=!1}),s=!0),clearTimeout(i),i=setTimeout(()=>{this.handleScrollEnd()},150)};window.addEventListener("scroll",r,{passive:!0}),window.addEventListener("orientationchange",()=>{setTimeout(()=>{this.handleOrientationChange()},100)},{passive:!0})}handleOptimizedResize(){window.hdContainerQueries&&window.hdContainerQueries.updateAllContainers(),window.hdGridLayout&&window.hdGridLayout.updateAllGrids(),this.resizeHandlers.forEach(e=>{try{e()}catch(t){console.error("Resize handler error:",t)}}),window.dispatchEvent(new CustomEvent("hd:optimizedResize",{detail:{viewport:{width:window.innerWidth,height:window.innerHeight}}}))}handleOptimizedScroll(){const e=window.scrollY,t=window.scrollX;this.scrollHandlers.forEach(i=>{try{i(t,e)}catch(s){console.error("Scroll handler error:",s)}}),this.updateScrollAnimations(e)}handleScrollEnd(){this.optimizeAfterScroll(),window.dispatchEvent(new CustomEvent("hd:scrollEnd",{detail:{scrollY:window.scrollY,scrollX:window.scrollX}}))}setupMemoryManagement(){window.addEventListener("beforeunload",()=>{this.cleanup()}),document.addEventListener("visibilitychange",()=>{document.hidden?this.pauseNonCriticalOperations():this.resumeOperations()}),setInterval(()=>{this.performPeriodicCleanup()},6e4)}preloadCriticalResources(){this.preloadCSS(["/build/assets/css/app.css","/build/assets/css/components.css"]),this.preloadJS(["/build/assets/js/app.js"]),this.preloadImages([])}optimizeInitialRender(){requestAnimationFrame(()=>{this.initializeNonCriticalComponents()}),setTimeout(()=>{this.initializeHeavyComponents()},100),document.body.classList.add("hd-initial-render-complete")}onResize(e){return this.resizeHandlers.add(e),()=>this.resizeHandlers.delete(e)}onScroll(e){return this.scrollHandlers.add(e),()=>this.scrollHandlers.delete(e)}observeVisibility(e){this.visibilityObserver&&e&&this.visibilityObserver.observe(e)}unobserveVisibility(e){this.visibilityObserver&&e&&this.visibilityObserver.unobserve(e)}forceLazyLoad(e){this.lazyLoadElement(e)}getMetrics(){return{observers:this.observers.size,lazyLoadQueue:this.lazyLoadQueue.size,resizeHandlers:this.resizeHandlers.size,scrollHandlers:this.scrollHandlers.size,memoryUsage:this.estimateMemoryUsage()}}updateConfig(e){this.config={...this.config,...e}}cleanup(){this.observers.forEach(e=>{e.disconnect?.()}),this.observers.clear(),this.lazyLoadQueue.clear(),this.resizeHandlers.clear(),this.scrollHandlers.clear()}fadeInElement(e){e.style.opacity="0",e.style.transition="opacity 0.3s ease-in-out",requestAnimationFrame(()=>{e.style.opacity="1"})}initializeComponent(e){e.getAttribute("data-component")}startAnimation(e){e.getAttribute("data-animation")}pauseComponent(e){}loadChart(e){}loadMap(e){}loadWidget(e){}loadGenericComponent(e){}preloadCSS(e){e.forEach(t=>{const i=document.createElement("link");i.rel="preload",i.as="style",i.href=t,document.head.appendChild(i)})}preloadJS(e){e.forEach(t=>{const i=document.createElement("link");i.rel="preload",i.as="script",i.href=t,document.head.appendChild(i)})}preloadImages(e){e.forEach(t=>{const i=new Image;i.src=t})}initializeNonCriticalComponents(){}initializeHeavyComponents(){}updateScrollAnimations(e){}optimizeAfterScroll(){}pauseNonCriticalOperations(){}resumeOperations(){}performPeriodicCleanup(){}estimateMemoryUsage(){return{observers:this.observers.size*1e3,handlers:(this.resizeHandlers.size+this.scrollHandlers.size)*100,lazyQueue:this.lazyLoadQueue.size*50}}setupScrollFallback(){let e;window.addEventListener("scroll",()=>{clearTimeout(e),e=setTimeout(()=>{this.checkVisibilityFallback()},100)},{passive:!0})}checkVisibilityFallback(){this.lazyLoadQueue.forEach(e=>{this.isElementVisible(e)&&(this.lazyLoadElement(e),this.lazyLoadQueue.delete(e))})}isElementVisible(e){const t=e.getBoundingClientRect();return t.top<window.innerHeight&&t.bottom>0}handleOrientationChange(){this.handleOptimizedResize(),"ontouchstart"in window&&this.optimizeForMobile()}optimizeForMobile(){document.body.classList.add("hd-mobile-optimized")}}let c;document.readyState==="loading"?document.addEventListener("DOMContentLoaded",()=>{c=new p,window.hdPerformanceOptimizer=c}):(c=new p,window.hdPerformanceOptimizer=c);typeof n<"u"&&n.exports&&(n.exports=p)});export default b();
