/* 
 * HD Tickets - Nuclear Dropdown Z-Index Fix
 * Last resort solution to ensure dropdowns appear above all content
 */

/* NUCLEAR OPTION - HIGHEST PRIORITY OVERRIDES */

/* Force navigation to top of stack */
nav,
#main-navigation,
nav[role="banner"] {
    z-index: 2147483647 !important;
    position: sticky !important;
    isolation: isolate !important;
}

/* Force all dropdowns to absolute maximum z-index */
.nav-dropdown,
[data-dropdown],
[data-dropdown="admin"],
[data-dropdown="profile"],
.dropdown-menu,
div[x-show*="Dropdown"],
div[x-show*="dropdown"] {
    z-index: 2147483646 !important;
    position: absolute !important;
    background: rgba(255, 255, 255, 0.98) !important;
    backdrop-filter: blur(8px) !important;
    border: 1px solid rgba(0, 0, 0, 0.1) !important;
    box-shadow: 0 25px 50px -12px rgba(0, 0, 0, 0.25) !important;
    isolation: isolate !important;
    pointer-events: auto !important;
}

/* Remove problematic CSS properties from all dashboard elements */
.customer-dashboard *,
.dashboard-container *,
.dashboard-header,
.stat-card,
.action-card,
.dashboard-card {
    backdrop-filter: none !important;
    -webkit-backdrop-filter: none !important;
    transform: none !important;
    will-change: auto !important;
    isolation: auto !important;
}

/* Ensure dashboard doesn't interfere */
.customer-dashboard,
.dashboard-container {
    z-index: 1 !important;
    position: relative !important;
    isolation: auto !important;
}

/* Make sure dropdown contents are clickable */
.nav-dropdown a,
.nav-dropdown button,
[data-dropdown] a,
[data-dropdown] button {
    pointer-events: auto !important;
    z-index: inherit !important;
    position: relative !important;
}

/* Remove any transforms that might create stacking contexts */
* {
    transform: none !important;
}

/* Force visible dropdowns to be on top */
.nav-dropdown[style*="opacity: 1"],
.nav-dropdown[x-show="adminDropdownOpen"],
.nav-dropdown[x-show="profileDropdownOpen"],
[data-dropdown][style*="opacity: 1"] {
    z-index: 2147483647 !important;
    position: fixed !important;
    isolation: isolate !important;
}

/* Emergency positioning for mobile */
@media (max-width: 768px) {
    .nav-dropdown,
    [data-dropdown] {
        position: fixed !important;
        top: 60px !important;
        left: 10px !important;
        right: 10px !important;
        width: auto !important;
        z-index: 2147483647 !important;
    }
}

/* Debug helper - shows dropdown boundaries */
.dropdown-debug .nav-dropdown,
.dropdown-debug [data-dropdown] {
    border: 3px solid red !important;
    box-shadow: inset 0 0 10px rgba(255, 0, 0, 0.3) !important;
}

/* Ensure dropdown menus stay visible during animations */
.nav-dropdown,
[data-dropdown] {
    transition: none !important;
    animation: none !important;
}

/* Override Alpine.js transition classes */
.nav-dropdown[x-transition],
[data-dropdown][x-transition] {
    transition: opacity 0.15s ease !important;
}

/* Final fallback - anything with these classes gets maximum z-index */
.admin-dropdown,
.profile-dropdown,
.user-menu,
.nav-menu {
    z-index: 2147483647 !important;
    position: absolute !important;
    isolation: isolate !important;
}
