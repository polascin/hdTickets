/* Semantic Forms Layer - Phase 2 Consolidation */
/* Provides canonical form control styles; legacy class aliases retained for transition */

/* Tokens (mapped to existing theme/design tokens where possible) */
:root {
  --hdt-form-gap: 1rem; /* default vertical spacing */
  --hdt-form-radius: 0.5rem; /* 8px */
  --hdt-form-radius-sm: 0.375rem; /* 6px */
  --hdt-form-radius-lg: 0.75rem; /* 12px */
  --hdt-form-height: 3rem; /* 48px */
  --hdt-form-height-sm: 2.5rem; /* 40px */
  --hdt-form-height-lg: 3.5rem; /* 56px */
  --hdt-form-padding: 0.75rem 1rem; /* 12px 16px */
  --hdt-form-padding-sm: 0.625rem 0.875rem;
  --hdt-form-padding-lg: 1rem 1.25rem;
  --hdt-form-transition: 0.2s cubic-bezier(0.4,0,0.2,1);
  --hdt-form-ring-color: var(--border-focus, var(--color-primary, #2563eb));
  --hdt-form-ring-outline: 2px;
  --hdt-form-bg: var(--bg-primary, #ffffff);
  --hdt-form-bg-disabled: var(--bg-tertiary, #f1f5f9);
  --hdt-form-border: var(--border-primary, #e5e7eb);
  --hdt-form-border-hover: var(--border-secondary, #d1d5db);
  --hdt-form-text: var(--text-primary, #111827);
  --hdt-form-text-subtle: var(--text-tertiary, #6b7280);
  --hdt-form-success: var(--color-success, #16a34a);
  --hdt-form-error: var(--color-error, #dc2626);
  --hdt-form-warning: var(--warning-600, #d97706);
}

/* Base group */
.hdt-form-group { display:flex; flex-direction:column; gap:0.5rem; margin-bottom:var(--hdt-form-gap); position:relative; }
.hdt-form-group:last-child { margin-bottom:0; }

/* Control base */
.hdt-input, .hdt-select, .hdt-textarea { width:100%; height:var(--hdt-form-height); padding:var(--hdt-form-padding); border:1px solid var(--hdt-form-border); border-radius:var(--hdt-form-radius); background:var(--hdt-form-bg); color:var(--hdt-form-text); font:inherit; font-size:0.9375rem; line-height:1.25rem; transition:var(--hdt-form-transition); appearance:none; box-shadow:0 1px 2px rgba(0,0,0,.05); }
.hdt-textarea { height:auto; min-height:var(--hdt-form-height); resize:vertical; line-height:1.4; }
.hdt-input:hover, .hdt-select:hover, .hdt-textarea:hover { border-color:var(--hdt-form-border-hover); }
.hdt-input:focus, .hdt-select:focus, .hdt-textarea:focus { outline:none; border-color:var(--hdt-form-ring-color); box-shadow:0 0 0 3px color-mix(in srgb, var(--hdt-form-ring-color) 45%, transparent); }
.hdt-input:disabled, .hdt-select:disabled, .hdt-textarea:disabled { background:var(--hdt-form-bg-disabled); color:var(--hdt-form-text-subtle); cursor:not-allowed; opacity:0.75; }
.hdt-input::placeholder, .hdt-textarea::placeholder { color:var(--hdt-form-text-subtle); }

/* Size variants */
.hdt-input--sm, .hdt-select--sm, .hdt-textarea--sm { height:var(--hdt-form-height-sm); padding:var(--hdt-form-padding-sm); border-radius:var(--hdt-form-radius-sm); font-size:0.8125rem; }
.hdt-input--lg, .hdt-select--lg, .hdt-textarea--lg { height:var(--hdt-form-height-lg); padding:var(--hdt-form-padding-lg); border-radius:var(--hdt-form-radius-lg); font-size:1rem; }

/* Floating label pattern */
.hdt-field--floating { position:relative; }
.hdt-field--floating .hdt-input { padding-top:1.25rem; padding-bottom:0.25rem; }
.hdt-floating-label { position:absolute; left:1rem; top:50%; transform:translateY(-50%); background:var(--hdt-form-bg); color:var(--hdt-form-text-subtle); font-size:0.9375rem; font-weight:400; pointer-events:none; transition:var(--hdt-form-transition); padding:0 0.25rem; max-width:calc(100% - 2rem); overflow:hidden; text-overflow:ellipsis; white-space:nowrap; }
.hdt-field--floating .hdt-input:focus + .hdt-floating-label,
.hdt-field--floating .hdt-input:not(:placeholder-shown) + .hdt-floating-label,
.hdt-field--floating .hdt-input.has-value + .hdt-floating-label { top:0; transform:translateY(-50%) scale(.85); color:var(--hdt-form-ring-color); font-weight:500; font-size:0.75rem; }

/* State variants (utility classes) */
.hdt-input--success { border-color:var(--hdt-form-success); }
.hdt-input--error { border-color:var(--hdt-form-error); }
.hdt-input--warning { border-color:var(--hdt-form-warning); }
.hdt-input--success:focus { box-shadow:0 0 0 3px color-mix(in srgb, var(--hdt-form-success) 45%, transparent); }
.hdt-input--error:focus { box-shadow:0 0 0 3px color-mix(in srgb, var(--hdt-form-error) 45%, transparent); }
.hdt-input--warning:focus { box-shadow:0 0 0 3px color-mix(in srgb, var(--hdt-form-warning) 45%, transparent); }

/* Validation / helper messages */
.hdt-form-message { display:flex; align-items:flex-start; gap:0.5rem; margin-top:0.375rem; font-size:0.875rem; line-height:1.4; transition:var(--hdt-form-transition); }
.hdt-form-message__icon { width:16px; height:16px; flex-shrink:0; margin-top:0.125rem; }
.hdt-form-message--success { color:var(--hdt-form-success); }
.hdt-form-message--error { color:var(--hdt-form-error); }
.hdt-form-message--warning { color:var(--hdt-form-warning); }
.hdt-form-message--muted { color:var(--hdt-form-text-subtle); }
.hdt-form-message--realtime { opacity:0; transform:translateY(-4px); transition:opacity .2s ease, transform .2s ease; }
.hdt-form-message--realtime.show { opacity:1; transform:translateY(0); }

/* Form progress (lightweight) */
.hdt-form-progress { width:100%; height:4px; background:var(--bg-tertiary,#f1f5f9); border-radius:2px; overflow:hidden; margin:1rem 0; position:relative; }
.hdt-form-progress__bar { height:100%; background:linear-gradient(90deg,var(--hdt-form-ring-color),color-mix(in srgb,var(--hdt-form-ring-color) 70%, white)); width:0; transition:width .3s ease; position:relative; }
.hdt-form-progress__bar::after { content:""; position:absolute; inset:0; background:linear-gradient(90deg,transparent,rgba(255,255,255,.35),transparent); animation:hdt-progress-shine 2s infinite; }
@keyframes hdt-progress-shine { 0% { transform:translateX(-100%);} 100% { transform:translateX(100%);} }

/* Multi-step indicator (compact) */
.hdt-form-steps { display:flex; align-items:center; justify-content:center; gap:.75rem; margin:1.5rem 0; }
.hdt-form-step { display:flex; align-items:center; gap:.4rem; color:var(--hdt-form-text-subtle); font-size:0.75rem; font-weight:500; }
.hdt-form-step__number { display:flex; align-items:center; justify-content:center; width:28px; height:28px; border:2px solid var(--hdt-form-border); border-radius:50%; background:var(--hdt-form-bg); font-weight:600; transition:var(--hdt-form-transition); font-size:0.75rem; }
.hdt-form-step--active { color:var(--hdt-form-ring-color); }
.hdt-form-step--active .hdt-form-step__number { border-color:var(--hdt-form-ring-color); background:var(--hdt-form-ring-color); color:#fff; }
.hdt-form-step--completed { color:var(--hdt-form-success); }
.hdt-form-step--completed .hdt-form-step__number { border-color:var(--hdt-form-success); background:var(--hdt-form-success); color:#fff; }

/* Section wrapper */
.hdt-form-section { margin:1.5rem 0; padding:1.25rem; background:var(--bg-elevated,#ffffff); border-radius:var(--hdt-form-radius-lg); border:1px solid var(--hdt-form-border); }
.hdt-form-section__title { font-size:1rem; font-weight:600; color:var(--hdt-form-text); margin-bottom:.5rem; }
.hdt-form-section__description { font-size:0.8125rem; color:var(--hdt-form-text-subtle); margin-bottom:1rem; }

/* Legacy alias group for messages, progress, steps, section - REMOVED in Phase 2E */
.hdt-form-message { display:flex; align-items:flex-start; gap:0.5rem; margin-top:0.375rem; font-size:0.875rem; line-height:1.4; transition:var(--hdt-form-transition); }
.hdt-form-message__icon { width:16px; height:16px; flex-shrink:0; margin-top:0.125rem; }
.hdt-form-message--success { color:var(--hdt-form-success); }
.hdt-form-message--error { color:var(--hdt-form-error); }
.hdt-form-message--warning { color:var(--hdt-form-warning); }
.hdt-form-message--realtime { opacity:0; transform:translateY(-4px); transition:opacity .2s ease, transform .2s ease; }
.hdt-form-message--realtime.show { opacity:1; transform:translateY(0); }
.hdt-form-progress { width:100%; height:4px; background:var(--bg-tertiary,#f1f5f9); border-radius:2px; overflow:hidden; margin:1rem 0; position:relative; }
.hdt-form-progress__bar { height:100%; background:linear-gradient(90deg,var(--hdt-form-ring-color),color-mix(in srgb,var(--hdt-form-ring-color) 70%, white)); width:0; transition:width .3s ease; position:relative; }
.hdt-form-progress__bar::after { content:""; position:absolute; inset:0; background:linear-gradient(90deg,transparent,rgba(255,255,255,.35),transparent); animation:hdt-progress-shine 2s infinite; }
.hdt-form-steps { display:flex; align-items:center; justify-content:center; gap:.75rem; margin:1.5rem 0; }
.hdt-form-step { display:flex; align-items:center; gap:.4rem; color:var(--hdt-form-text-subtle); font-size:0.75rem; font-weight:500; }
.hdt-form-step__number { display:flex; align-items:center; justify-content:center; width:28px; height:28px; border:2px solid var(--hdt-form-border); border-radius:50%; background:var(--hdt-form-bg); font-weight:600; transition:var(--hdt-form-transition); font-size:0.75rem; }
.hdt-form-step--active { color:var(--hdt-form-ring-color); }
.hdt-form-step--active .hdt-form-step__number { border-color:var(--hdt-form-ring-color); background:var(--hdt-form-ring-color); color:#fff; }
.hdt-form-step--completed { color:var(--hdt-form-success); }
.hdt-form-step--completed .hdt-form-step__number { border-color:var(--hdt-form-success); background:var(--hdt-form-success); color:#fff; }
.hdt-form-section { margin:1.5rem 0; padding:1.25rem; background:var(--bg-elevated,#ffffff); border-radius:var(--hdt-form-radius-lg); border:1px solid var(--hdt-form-border); }
.hdt-form-section__title { font-size:1rem; font-weight:600; color:var(--hdt-form-text); margin-bottom:.5rem; }
.hdt-form-section__description { font-size:0.8125rem; color:var(--hdt-form-text-subtle); margin-bottom:1rem; }

/* Layout grid / group variants - semantic only */
.hdt-form-grid { display:grid; gap:var(--hdt-form-gap); }
.hdt-form-grid--2col { grid-template-columns:1fr 1fr; }
.hdt-form-grid--3col { grid-template-columns:repeat(3,1fr); }
.hdt-form-group--horizontal { flex-direction:row; align-items:center; gap:1rem; }
.hdt-form-group--inline { flex-direction:row; align-items:flex-start; gap:0.75rem; }

@media (max-width: 768px) {
  .hdt-form-grid--2col,
  .hdt-form-grid--3col { grid-template-columns:1fr; }
  .hdt-form-group--horizontal { flex-direction:column; align-items:flex-start; }
  .hdt-input { height:var(--hdt-form-height-lg); font-size:1rem; }
}

@media (max-width: 480px) {
  .hdt-form-grid { gap:0.75rem; }
  .hdt-form-section { padding:0.75rem; margin:0.75rem 0; }
}

/* Phase 2E Complete - Legacy .form-* aliases removed */
