<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>HD Tickets - Dropdown Debug</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        [x-cloak] { display: none !important; }
    </style>
</head>
<body class="bg-gray-100">
    <div class="max-w-4xl mx-auto p-8">
        <h1 class="text-3xl font-bold text-gray-900 mb-8">HD Tickets Dropdown Debug</h1>
        
        <!-- Test 1: Basic Alpine.js -->
        <div class="bg-white p-6 rounded-lg shadow mb-6">
            <h2 class="text-xl font-semibold mb-4">Test 1: Basic Alpine.js</h2>
            <div x-data="{ count: 0 }">
                <button @click="count++" class="bg-blue-500 text-white px-4 py-2 rounded">
                    Count: <span x-text="count"></span>
                </button>
                <p x-show="count > 0" x-cloak class="mt-2 text-green-600">
                    Alpine.js is working! ‚úÖ
                </p>
            </div>
        </div>

        <!-- Test 2: NavigationData Component Test -->
        <div class="bg-white p-6 rounded-lg shadow mb-6">
            <h2 class="text-xl font-semibold mb-4">Test 2: NavigationData Component</h2>
            <div x-data="navigationData()" x-init="console.log('NavigationData initialized:', $data)">
                <div class="space-x-4">
                    <button @click="toggleAdminDropdown()" 
                            class="bg-green-500 text-white px-4 py-2 rounded">
                        Admin Dropdown: <span x-text="adminDropdownOpen ? 'OPEN' : 'CLOSED'"></span>
                    </button>
                    
                    <button @click="toggleProfileDropdown()" 
                            class="bg-purple-500 text-white px-4 py-2 rounded">
                        Profile Dropdown: <span x-text="profileDropdownOpen ? 'OPEN' : 'CLOSED'"></span>
                    </button>
                </div>
                
                <!-- Debug Info -->
                <div class="mt-4 p-4 bg-gray-100 rounded">
                    <h3 class="font-semibold">Debug Info:</h3>
                    <p>Admin Dropdown: <span x-text="adminDropdownOpen"></span></p>
                    <p>Profile Dropdown: <span x-text="profileDropdownOpen"></span></p>
                    <p>Mobile Menu: <span x-text="mobileMenuOpen"></span></p>
                </div>
            </div>
        </div>

        <!-- Test 3: Manual Dropdown -->
        <div class="bg-white p-6 rounded-lg shadow mb-6">
            <h2 class="text-xl font-semibold mb-4">Test 3: Manual Dropdown</h2>
            <div x-data="{ open: false }" @click.outside="open = false">
                <div class="relative">
                    <button @click="open = !open" 
                            class="bg-red-500 text-white px-4 py-2 rounded">
                        Manual Dropdown: <span x-text="open ? 'OPEN' : 'CLOSED'"></span>
                    </button>
                    
                    <div x-show="open" 
                         x-cloak
                         x-transition:enter="transition ease-out duration-100"
                         x-transition:enter-start="transform opacity-0 scale-95"
                         x-transition:enter-end="transform opacity-100 scale-100"
                         x-transition:leave="transition ease-in duration-75"
                         x-transition:leave-start="transform opacity-100 scale-100"
                         x-transition:leave-end="transform opacity-0 scale-95"
                         class="absolute z-50 mt-2 w-48 bg-white rounded-md shadow-lg border border-gray-200">
                        <div class="py-1">
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Item 1</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Item 2</a>
                            <a href="#" class="block px-4 py-2 text-sm text-gray-700 hover:bg-gray-100">Item 3</a>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Results -->
        <div class="bg-yellow-50 border border-yellow-200 p-6 rounded-lg">
            <h2 class="text-xl font-semibold text-yellow-800 mb-4">Expected Results</h2>
            <ul class="text-sm text-yellow-700 space-y-1">
                <li>‚úÖ Test 1 should show working counter</li>
                <li>‚úÖ Test 2 should show navigationData component state</li>
                <li>‚úÖ Test 3 should show working dropdown with transitions</li>
            </ul>
            <p class="mt-4 text-sm text-yellow-600">
                If Test 2 fails, there's an issue with the navigationData component registration.
            </p>
        </div>
    </div>

    <script>
        // Register navigationData component for testing
        document.addEventListener('alpine:init', () => {
            console.log('üöÄ Alpine.js initializing for debug test...');
            
            Alpine.data('navigationData', () => ({
                open: false,
                mobileMenuOpen: false,
                adminDropdownOpen: false,
                profileDropdownOpen: false,
                
                init() {
                    console.log('üîß NavigationData component initialized in debug test');
                },
                
                closeAll() {
                    this.adminDropdownOpen = false;
                    this.profileDropdownOpen = false;
                    this.mobileMenuOpen = false;
                },
                
                toggleAdminDropdown() {
                    this.adminDropdownOpen = !this.adminDropdownOpen;
                    this.profileDropdownOpen = false;
                    console.log('üîß Admin dropdown:', this.adminDropdownOpen ? 'OPEN' : 'CLOSED');
                },
                
                toggleProfileDropdown() {
                    this.profileDropdownOpen = !this.profileDropdownOpen;
                    this.adminDropdownOpen = false;
                    console.log('üë§ Profile dropdown:', this.profileDropdownOpen ? 'OPEN' : 'CLOSED');
                },
                
                toggleMobileMenu() {
                    this.mobileMenuOpen = !this.mobileMenuOpen;
                    console.log('üì± Mobile menu:', this.mobileMenuOpen ? 'OPEN' : 'CLOSED');
                }
            }));
            
            console.log('‚úÖ NavigationData component registered for debug test');
        });

        document.addEventListener('alpine:initialized', () => {
            console.log('üéâ Alpine.js fully initialized!');
        });

        // Log any JavaScript errors
        window.addEventListener('error', (e) => {
            console.error('‚ùå JavaScript Error:', e.error);
        });
    </script>
</body>
</html>
