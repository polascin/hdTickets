<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Alpine.js Debug Test</title>
    <script src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js" defer></script>
    <style>
        [x-cloak] { display: none !important; }
        .dropdown { 
            background: white; 
            border: 1px solid #ccc; 
            border-radius: 4px;
            padding: 10px;
            margin-top: 5px;
            position: absolute;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        }
        nav {
            background: #f8f9fa;
            padding: 1rem;
            border-bottom: 1px solid #dee2e6;
        }
        button {
            background: #007bff;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 4px;
            cursor: pointer;
            margin-right: 0.5rem;
        }
        button:hover {
            background: #0056b3;
        }
        .debug-info {
            background: #f8f9fa;
            border: 1px solid #dee2e6;
            padding: 1rem;
            margin: 1rem 0;
            border-radius: 4px;
        }
        .relative { position: relative; }
    </style>
</head>
<body>
    <h1>Alpine.js and Navigation Debug Test</h1>
    
    <div class="debug-info">
        <h2>Debug Information</h2>
        <p>Alpine.js loaded: <span id="alpine-status">❌ No</span></p>
        <p>navigationData function available: <span id="nav-function-status">❌ No</span></p>
    </div>

    <!-- Test 1: Basic Alpine.js functionality -->
    <div class="debug-info" x-data="{ message: 'Hello Alpine.js!', count: 0 }">
        <h3>Test 1: Basic Alpine.js</h3>
        <p x-text="message"></p>
        <button @click="count++">Count: <span x-text="count"></span></button>
    </div>

    <!-- Test 2: Basic dropdown functionality -->
    <div class="debug-info relative" x-data="{ open: false }">
        <h3>Test 2: Basic Dropdown</h3>
        <button @click="open = !open">Toggle Dropdown</button>
        <div x-show="open" x-cloak class="dropdown">
            <p>Dropdown content is visible!</p>
            <button @click="open = false">Close</button>
        </div>
    </div>

    <!-- Test 3: Navigation-like component -->
    <nav x-data="{ 
        adminDropdownOpen: false, 
        profileDropdownOpen: false, 
        mobileMenuOpen: false,
        
        init() {
            console.log('Navigation component initialized');
            document.addEventListener('click', (e) => {
                if (!this.$el.contains(e.target)) {
                    this.adminDropdownOpen = false;
                    this.profileDropdownOpen = false;
                }
            });
        },
        
        closeAll() {
            this.adminDropdownOpen = false;
            this.profileDropdownOpen = false;
            this.mobileMenuOpen = false;
        }
    }">
        <h3>Test 3: Navigation Component</h3>
        
        <button @click="adminDropdownOpen = !adminDropdownOpen">
            Admin Menu (<span x-text="adminDropdownOpen ? 'Open' : 'Closed'"></span>)
        </button>
        
        <div x-show="adminDropdownOpen" x-cloak class="dropdown relative">
            <p>Admin Dropdown Content</p>
            <button @click="adminDropdownOpen = false">Close Admin</button>
        </div>
        
        <button @click="profileDropdownOpen = !profileDropdownOpen">
            Profile Menu (<span x-text="profileDropdownOpen ? 'Open' : 'Closed'"></span>)
        </button>
        
        <div x-show="profileDropdownOpen" x-cloak class="dropdown relative">
            <p>Profile Dropdown Content</p>
            <button @click="profileDropdownOpen = false">Close Profile</button>
        </div>
        
        <button @click="mobileMenuOpen = !mobileMenuOpen">
            Mobile Menu (<span x-text="mobileMenuOpen ? 'Open' : 'Closed'"></span>)
        </button>
        
        <div x-show="mobileMenuOpen" x-cloak class="dropdown relative">
            <p>Mobile Menu Content</p>
            <button @click="mobileMenuOpen = false">Close Mobile</button>
        </div>
        
        <button @click="closeAll()">Close All</button>
    </nav>

    <!-- Test 4: Simulate navigationData() function -->
    <div class="debug-info relative" x-data="(() => {
        // Simulate the navigationData function
        function navigationData() {
            return {
                open: false,
                mobileMenuOpen: false,
                adminDropdownOpen: false,
                profileDropdownOpen: false,
                
                init() {
                    console.log('navigationData() component initialized');
                    document.addEventListener('click', (e) => {
                        if (!this.$el.contains(e.target)) {
                            this.adminDropdownOpen = false;
                            this.profileDropdownOpen = false;
                        }
                    });
                },
                
                closeAll() {
                    this.adminDropdownOpen = false;
                    this.profileDropdownOpen = false;
                    this.mobileMenuOpen = false;
                }
            };
        }
        
        return navigationData();
    })()">
        <h3>Test 4: navigationData() Function Simulation</h3>
        
        <button @click="adminDropdownOpen = !adminDropdownOpen">
            Admin Dropdown (<span x-text="adminDropdownOpen ? 'Open' : 'Closed'"></span>)
        </button>
        
        <div x-show="adminDropdownOpen" x-cloak class="dropdown relative">
            <p>This simulates the Admin dropdown from navigation</p>
            <button @click="closeAll()">Close All</button>
        </div>
        
        <button @click="profileDropdownOpen = !profileDropdownOpen">
            Profile Dropdown (<span x-text="profileDropdownOpen ? 'Open' : 'Closed'"></span>)
        </button>
        
        <div x-show="profileDropdownOpen" x-cloak class="dropdown relative">
            <p>This simulates the Profile dropdown from navigation</p>
            <button @click="closeAll()">Close All</button>
        </div>
    </div>

    <script>
        // Debug Alpine.js status
        document.addEventListener('DOMContentLoaded', function() {
            setTimeout(() => {
                const alpineStatus = document.getElementById('alpine-status');
                const navFunctionStatus = document.getElementById('nav-function-status');
                
                if (window.Alpine) {
                    alpineStatus.innerHTML = '✅ Yes (version: ' + (Alpine.version || 'unknown') + ')';
                    alpineStatus.style.color = 'green';
                    console.log('Alpine.js is available:', window.Alpine);
                }
                
                // Check if navigationData is available in global scope
                if (typeof window.navigationData === 'function') {
                    navFunctionStatus.innerHTML = '✅ Yes';
                    navFunctionStatus.style.color = 'green';
                } else {
                    console.log('navigationData function not in global scope');
                    // Check if it's available through Alpine
                    if (window.Alpine && window.Alpine.store) {
                        console.log('Alpine store available, checking for navigationData...');
                    }
                }
                
                console.log('=== DEBUG INFO ===');
                console.log('Window.Alpine:', !!window.Alpine);
                console.log('Alpine version:', window.Alpine?.version);
                console.log('navigationData function:', typeof window.navigationData);
                console.log('==================');
            }, 100);
        });
    </script>
</body>
</html>
