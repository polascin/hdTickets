# Vite Configuration - HD Tickets Sports Monitoring System

## Overview
This document outlines the Vite 7.x configuration optimizations implemented for the HD Tickets application, ensuring compatibility with modern versions while maintaining CSS timestamp functionality for cache prevention.

## Key Features

### 1. CSS Timestamp Functionality ✅
- **CRITICAL REQUIREMENT**: CSS files include timestamps to prevent browser caching
- Implemented in `assetFileNames` configuration: `assets/css/[name]-[hash]-${timestamp}[extname]`
- Global timestamp available via `__CSS_TIMESTAMP__` and `__LARAVEL_VITE_TIMESTAMP__`
- SCSS/SASS integration with `$css-timestamp` variable

### 2. Laravel Integration ✅
- Laravel Vite Plugin v2.0.0 with enhanced refresh patterns
- Proper hot file and build directory configuration
- Enhanced refresh glob patterns for better development experience

### 3. Vue 3.5+ Compatibility ✅
- Vue plugin with enhanced script options (defineModel, propsDestructure)
- Reactivity transform enabled
- Vue 3.5+ feature flags properly configured
- Custom element recognition for Alpine.js integration

### 4. Modern Build Targets ✅
- ES2022 target with modern browser support
- Enhanced browser targets: Chrome 87+, Firefox 78+, Safari 14+, Edge 88+
- Module preload polyfill for better browser compatibility

### 5. Optimized Dependency Handling ✅
- Comprehensive dependency pre-bundling
- Enhanced chunk splitting strategy
- Alpine.js ecosystem plugins included
- Chart.js and UI libraries properly optimized

### 6. Development Experience ✅
- Enhanced HMR with overlay support
- CORS enabled for cross-origin development
- File system optimization with proper watching
- Comprehensive build scripts (dev, build, watch, preview)

## Configuration Highlights

### CSS Processing
- **Minifier**: esbuild (Tailwind CSS compatible)
- **PostCSS**: Tailwind CSS v4.x with enhanced autoprefixer
- **Preprocessors**: SCSS/SASS with timestamp injection
- **Source Maps**: Enabled in development

### Asset Optimization
- **Images**: Organized in `assets/images/` with content hash
- **Fonts**: Organized in `assets/fonts/` with content hash  
- **CSS**: Organized in `assets/css/` with content hash + timestamp
- **JavaScript**: Organized in `assets/js/` with content hash

### Chunk Strategy
- **vendor-vue**: Vue ecosystem (Vue, Vue Router)
- **vendor-charts**: Chart.js and visualization libraries
- **vendor-ui**: UI components (SweetAlert2, Flatpickr, Heroicons)
- **vendor-http**: HTTP and WebSocket libraries (Axios, Laravel Echo, Pusher)
- **vendor-alpine**: Alpine.js and plugins
- **vendor**: Other large node_modules packages

## Scripts Available

```bash
# Development
npm run dev              # Start development server
npm run dev:debug        # Development with debug mode
npm run dev:host         # Development server accessible from network
npm run dev:full         # Start development server + WebSocket server

# Building
npm run build            # Production build
npm run build:analyze    # Build with bundle analysis
npm run build:production # Explicit production build
npm run watch            # Build with file watching
npm run preview          # Preview production build

# Utilities
npm run clean            # Clean all build artifacts
npm run clean:build      # Clean build directory only
npm run websocket        # Start WebSocket server
npm run websocket:daemon # Start WebSocket server as daemon
```

## Browser Support
- **Chrome**: 87+
- **Firefox**: 78+
- **Safari**: 14+
- **Edge**: 88+
- **Mobile**: Modern mobile browsers

## Performance Optimizations
- **Terser**: Advanced JavaScript minification with ES2022 output
- **CSS Minification**: esbuild for Tailwind CSS compatibility
- **Tree Shaking**: Enabled with proper ESM imports
- **Code Splitting**: Intelligent vendor and route-based splitting
- **Asset Inlining**: Small assets (< 4KB) inlined as base64

## Security Features
- **Content Hash**: All assets include content-based hashing
- **Timestamp Cache Busting**: CSS files include build timestamps
- **Source Map Protection**: Source maps only in development
- **Console Removal**: Console statements removed in production

## Integration with Ubuntu 24.04 LTS + Apache2
- **Hot File**: Located in `public/hot` for Apache integration
- **Build Directory**: `public/build` for proper Apache serving
- **Asset URLs**: Relative paths for flexible deployment
- **CORS**: Configured for development with Apache proxy

## Maintenance Notes
- **Vite Version**: 7.1.2 (latest stable)
- **Laravel Plugin**: 2.0.0 (latest compatible)
- **Vue Plugin**: 6.0.1 (Vue 3.5+ compatible)
- **Node Target**: ES2022 with top-level await support

## Troubleshooting
1. **CSS Not Updating**: Check timestamp generation in build output
2. **HMR Issues**: Verify port 5173 is accessible and not blocked
3. **Build Failures**: Check for Tailwind CSS directive compatibility
4. **Large Bundle Size**: Review chunk splitting and vendor optimization
